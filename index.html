<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Перенаправление</title>
</head>
<body>

<script>

function getDevice() {
  const userAgent = navigator.userAgent.toLowerCase();
  if (/android/i.test(userAgent)) {
    return 'android';
  } else if (/iphone|ipad|ipod/i.test(userAgent)) {
    return 'ios';
  } else {
    return 'desktop';
  }
}
function fallbackCopyLinkToClipboard(text) {
  var tempInput = document.createElement("textarea");
  tempInput.value = text;
  document.body.appendChild(tempInput);
  tempInput.select();
  document.execCommand("copy");
  document.body.removeChild(tempInput);
  alert("Текст скопирован в буфер обмена!");
}

async function saveLinkToClipboard(copyText) {
  copyText.select();
  copyText.setSelectionRange(0, 99999);
  if (navigator.clipboard) {
    try {
      await navigator.clipboard.writeText(copyText.value);
      alert('Ссылка успешно скопирована!');
    } catch (error) {
      console.error('Ошибка при копировании ссылки:', error);
      alert('Не удалось скопировать ссылку!');
    }
  } else {
    // Используйте альтернативный метод для устаревших браузеров
    fallbackCopyLinkToClipboard(copyText.value);
  }
}

function redirectToLink(link) {
  window.location.href = link;
}

const currentPageUrl = window.location.href;

document.addEventListener("DOMContentLoaded", function() {
    const copyText = document.createElement("textarea");
    copyText.value = currentPageUrl;
    document.body.appendChild(copyText);
    saveLinkToClipboard(copyText);
});

const device = getDevice();

switch (device) {
  case 'android':
    redirectToLink('https://play.google.com/store/apps/details?id=com.alfredtheapp.alfred');
    break;
  case 'ios':
    redirectToLink('https://apps.apple.com/us/app/alfredstay/id6450202202');
    break;
  case 'desktop':
    redirectToLink('https://www.alfredtheapp.com/');
    break;
}

</script>

</body>
</html>